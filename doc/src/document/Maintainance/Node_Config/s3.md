
公共配置

|配置项| 类型| 说明|
|------|-----|-----|
|详见[公共配置][public_config]|||

SequoiaCM 配置

|配置项                     |类型   |说明                                    | 生效类型 |
|---------------------------|-------|----------------------------------------|----------|
|spring.application.name|str|S3 节点的服务名|重启生效|
|scm.s3.authorization.maxTimeOffset|str|S3 签名校验时，允许签名时间与本地服务器时间的最大偏差值，默认值 -1 表示不限制，单位：毫秒|重启生效|
|scm.s3.authorization.sortHeaders|boolean|S3 签名校验时，是否需要对参与签名的头部进行排序再进行签名计算，默认值 false |重启生效|
|scm.s3.bucket.allowReput|boolean|S3 重复创建桶时是否报错，默认 false |重启生效|
|scm.s3.context.keepaliveTime|num|S3 List Object V2 的上下文最长空闲时间，默认值：1h，单位：毫秒|重启生效|
|scm.s3.context.cleanPeriod|num|S3 List Object V2 的上下文清理间隔，默认值：30min，单位：毫秒|重启生效|
|scm.s3.multipartupload.incompletelifecycle|num|S3 未完成的分段上传数据最大存活时间，默认值：3day，单位：天|重启生效|
|scm.s3.multipartupload.completereservetime|num|S3 对已完成的分段上传数据最大存活时间，默认：1day，单位：小时|重启生效|
|scm.s3.session.checkInterval|num|S3 session 缓存检查周期，默认：60s，单位：毫秒|重启生效|
|scm.audit.mask|str|审计日志操作配置，控制对不同操作命令记录审计日志。默认为空，不记录任何操作的审计日志。支持的配置详见[审计操作类型掩码列表][audit_log]|在线生效|
|scm.audit.userMask|str|审计日志用户配置，默认为空，不记录任何用户的审计日志。支持的配置详见[审计用户类型掩码列表][audit_log]|在线生效|
|scm.audit.user.xxx|str|审计日志操作配置，控制具体用户对不同操作命令记录审计日志。默认为空，不记录用户名为 xxx 用户任何操作的审计日志。支持的配置详见[审计操作类型掩码列表][audit_log]|在线生效|
|scm.audit.userType.xxx|str|审计日志操作配置，控制用户类型对不同操作命令记录审计日志。默认为空，不记录用户类型为 xxx 用户任何操作的审计日志。支持的配置详见[审计操作类型掩码列表][audit_log]|在线生效|
|scm.privilege.heartbeat.interval|num|S3 服务节点查询鉴权服务更新自身权限信息的心跳间隔，默认值：10000，单位：毫秒|重启生效|
|scm.conf.client.site.heartbeatInterval|num|S3 服务节点请求查询配置服务site版本号的心跳间隔，默认值：180000，单位：毫秒|重启生效|
|scm.conf.client.node.heartbeatInterval|num|S3 服务节点请求查询配置服务node版本号的心跳间隔，默认值：180000，单位：毫秒|重启生效|
|scm.conf.client.workspace.heartbeatInterval|num|S3 服务节点请求查询配置服务workspace版本号的心跳间隔，默认值：180000，单位：毫秒|重启生效|
|scm.conf.client.metaData.heartbeatInterval|num|S3 服务节点请求查询配置服务metaData版本号的心跳间隔，默认值：180000，单位：毫秒|重启生效|
|scm.conf.client.bucket.heartbeatInterval|num|S3 服务节点请求查询配置服务bucket版本号的心跳间隔，默认值：180000，单位：毫秒|重启生效|
|scm.conf.client.user.heartbeatInterval|num|S3 服务节点请求查询配置服务user版本号的心跳间隔，默认值：180000，单位：毫秒|重启生效|
|scm.conf.client.role.heartbeatInterval|num|S3 服务节点请求查询配置服务role版本号的心跳间隔，默认值：180000，单位：毫秒|重启生效|
|scm.conf.client.quota.heartbeatInterval|num|S3 服务节点请求查询配置服务quota(桶限额配置)版本号的心跳间隔，默认值：180000，单位：毫秒|重启生效|
|scm.store.sequoiadb.urls         |str    |S3 服务节点的元数据服务地址（sequoiadb的协调节点地址列表：ip1:port2,ip2:port2）|重启生效|
|scm.store.sequoiadb.username         |str    |S3 服务节点的元数据服务用户名（sequoiadb的用户名），默认用户名为空|重启生效|
|scm.store.sequoiadb.password    |str    |S3 服务节点的元数据服务密码文件路径（sequoiadb的密码），默认密码为空|重启生效|
|scm.store.sequoiadb.connectTimeout      |num    |S3 服务节点与sdb建立连接的超时时长，默认值：10000，单位：毫秒|重启生效|
|scm.store.sequoiadb.maxAutoConnectRetryTime|num    |S3 服务节点与sdb建立连接的重试时长，默认值：15000，单位：毫秒|重启生效|
|scm.store.sequoiadb.socketTimeout          |num    |S3 服务节点与sdb的socket连接超时时长，默认值：0（不设置超时），单位：毫秒|重启生效|
|scm.store.sequoiadb.useNagle               |boolean|S3 服务节点与sdb的连接是否使用nagle，默认值：false            |重启生效|
|scm.store.sequoiadb.useSSL                    |boolean|S3 服务节点与sdb的连接是否使用ssl，默认值：false                |重启生效|
|scm.store.sequoiadb.maxConnectionNum       |num    |S3 服务节点的sdb连接池的最大连接数，默认值：500|重启生效|
|scm.store.sequoiadb.deltaIncCount          |num    |S3 服务节点的sdb连接池的每次增长的连接数，默认值：10|重启生效|
|scm.store.sequoiadb.maxIdleNum            |num    |S3 服务节点的sdb连接池的最大空闲连接数，默认值：10|重启生效|
|scm.store.sequoiadb.keepAliveTime         |num    |S3 服务节点的sdb连接池保留空闲连接的时长，默认值：60000（不清除空闲连接），单位：毫秒|重启生效|
|scm.store.sequoiadb.recheckCyclePeriod     |num    |S3 服务节点的sdb连接池定时清除连接的周期，默认值：30000，单位：毫秒|重启生效|
|scm.store.sequoiadb.validateConnection     |boolean|S3 服务节点的sdb连接池是否开启出池检查，默认值：true|重启生效|
|scm.store.sequoiadb.location|str|元数据服务 SequoiaDB 连接池 location 配置，默认值为空|重启生效|
|scm.zookeeper.urls|str|S3 服务节点的zookeeper服务地址(ip1:host1,ip2:host2)|重启生效|
|scm.zookeeper.cleanJobPeriod                |num|S3 服务节点全量清理zookeeper无效节点的周期，默认值：1800000 (30分钟)，单位：毫秒                           |重启生效|
|scm.zookeeper.maxBuffer                     |num|S3 服务节点全量清理zookeeper无效节点时所使用的最大buffer大小，默认使用 JVM 最大堆内存的 1/5，单位：字节       |重启生效|
|scm.zookeeper.cleanJobResidualTime          |num|S3 服务节点将清理残留多久的zookeeper节点，默认值：180000 (3分钟)，单位：毫秒                              |重启生效|
|scm.zookeeper.maxCleanThreads               |num|S3 服务节点清理残留的zookeeper节点所使用的最大线程数，默认值：6                                         |重启生效|
|scm.zookeeper.cleanQueueSize                |num|S3 服务节点清理残留的zookeeper节点所使用的异步缓存队列的大小，默认值：10000                                |重启生效|
|scm.jvm.options                |str    |配置 java jvm 参数，例如：-Xmx2048M -Xms2048M -Xmn1536M，默认为空，即启动节点不添加任何 jvm 参数|重启生效|
|scm.cephs3.connectionDecider.mode    |str  |配置 cephs3 站点数据源的主备策略，可选值：<br>auto，根据主备连接情况自动决策（默认）<br> primary_only，强制连主<br>standby_only，强制连备    |重启生效|
|scm.cephs3.detectInterval            |num  |S3 服务节点探测宕机的 cephs3 站点数据源是否恢复的时间间隔，默认值：5000，单位：毫秒|重启生效|
|scm.cephs3.detectClient.connTimeout  |num  |S3 服务节点探测宕机的 cephs3 站点数据源是否恢复时，建立连接的超时时长，默认值：5000，单位：毫秒|重启生效|
|scm.cephs3.client.connTimeout        |num  |S3 服务节点与 cephs3 站点数据源建立连接的超时时长，默认值为：10000，单位：毫秒|重启生效|
|scm.cephs3.client.socketTimeout      |num  |S3 服务节点与 cephs3 站点数据源的socket连接超时时长，默认值为：50000，单位：毫秒|重启生效|
|scm.cephs3.client.maxErrorRetry      |num  |S3 服务节点请求 cephs3 站点数据源的失败重试次数，默认值：3|重启生效|
|scm.cephs3.client.connTTL            |num  |S3 服务节点的 cephs3 站点数据源连接池内连接的过期时间，默认值：-1（不过期），单位：毫秒 |重启生效|
|scm.cephs3.client.maxConns           |num  |S3 服务节点允许同时与 cephs3 站点数据源打开的最大连接数，默认值：50  |重启生效|
|scm.cephs3.client.signerOverride     |str  |cephs3 站点数据源驱动签名配置，默认值：S3SignerType（v2版本签名），填空串表示由客户端自动选择签名算法|重启生效|
|scm.sftp.connectTimeout       |num  |配置 sftp 站点 ssh 建立连接超时时长，默认值：30000，单位：毫秒|重启生效|
|scm.sftp.socketTimeout       |num   |配置 sftp 站点 ssh socket 连接超时时长，默认值：30000，单位：毫秒|重启生效|
|scm.sftp.serverAliveInterval |num   |配置 sftp 站点 ssh 连接的心跳保持频率，默认值：2000，单位：毫秒|重启生效|
|scm.slowlog.enabled         |boolean    |是否开启慢操作日志告警功能，默认值：false，详情请见：[慢操作日志][slow_log]|在线生效|
|scm.slowlog.allRequest      |num        |配置全局所有请求的告警阈值，当某个请求的处理时间大于或等于此值时，会在日志文件中打印慢操作告警信息。 默认值：-1（负数表示无限大的告警阈值），单位：毫秒|在线生效|
|scm.slowlog.request.xxx     |num        |单独配置某类请求的告警阈值，xxx 填写请求方式和地址，如：scm.slowlog.request.[POST/api/v1/files]=10000 配置文件上传请求的告警阈值为 10 秒，由于请求地址中包含特殊字符，需要用 [ ] 包裹 |在线生效|
|scm.slowlog.allOperation    |num        |配置全局内部操作的告警阈值，当某个内部操作的执行时间大于或等于此值时，会在日志文件中打印慢操作告警信息。 默认值：-1（负数表示无限大的告警阈值），单位：毫秒    |在线生效|
|scm.slowlog.operation.xxx   |num        |单独配置某个内部操作的告警阈值，xxx 填写具体的操作名称   |在线生效|
|scm.slowlog.appender        |str        |配置慢操作信息输出的位置：LOGGER：输出到日志文件、TRACER：输出到链路追踪系统的链路信息中，可同时配置多个（用逗号隔开），默认值：LOGGER,TRACER   |在线生效|
|scm.zookeeper.acl.enabled     | boolean  | 是否开启 ZooKeeper ACL 权限控制，默认值：false。详情请见：[ZooKeeper 安全性配置][zookeeper_sercurity]|重启生效|
|scm.quota.lowWater.rate| num     | 配置桶限额的低水位比例，当桶内已用额度和总额度的比例小于或等于该值时，限额控制将采用低水位策略<br>该参数取值范围为 [0,100]，默认值为 95，表示"已用容量/总容量"或"已上传对象数/总对象数"的比例小于或等于 95% 时，采用低水位策略 |在线生效|
|scm.quota.lowWater.minObjects| num     | 配置桶限额的低水位对象数，默认值为 500，表示当桶内可上传对象数大于或等于 500 时，限额控制将采用低水位策略    |在线生效|
|scm.quota.lowWater.minSize| str     | 配置桶限额的低水位容量，默认值为 1g，表示当桶内可用容量大于或等于 1GB 时，限额控制将采用低水位策略<br>数字的后缀表示容量单位，支持单位 m（M）和 g（G）  |在线生效|
|scm.quota.lowWater.policy| str     | 配置低水位的额度控制策略，默认值为 async，可选取值如下：<br>async：异步控制<br>sync：同步控制 |在线生效|
|scm.quota.highWater.policy| str     | 配置高水位的额度控制策略，默认值为 sync，可选取值如下：<br>async：异步控制<br>sync：同步控制 |在线生效|
|scm.quota.asyncStrategy.flushInterval| num     | 配置异步额度控制时更新数据表的频率，单位为毫秒，默认值为 10000 |在线生效|
|scm.quota.asyncStrategy.maxCacheObjects| num     | 配置异步额度控制时更新数据表的对象数变化阈值，默认值为 500，表示当本地缓存中的对象数新增或减少 500 时，更新数据表 |在线生效|
|scm.quota.asyncStrategy.maxCacheSize| str     | 配置异步额度控制时更新数据表的容量变化阈值，默认值为 1g，表示当本地缓存中的容量变化达到 1GB 时，更新数据表<br>数字的后缀表示容量单位，支持单位 m（M）和 g（G） |在线生效|
|scm.quota.refreshSyncInfoInterval| num     | 配置读取额度统计表的周期，单位为毫秒，默认值为 10000 |在线生效|
|scm.datasource.sequoiadb.location|str|数据服务 SequoiaDB 连接池 location 配置，默认值为空|重启生效|
|scm.datasource.sequoiadb.putLobRequiredVersion|str|使用 SequoiaDB putLob 接口要求的版本范围，默认值：3.6.1，支持填写范围如 [3.6.1,4)|重启生效|
|scm.zookeeper.acl.id          | str   | 授权对象，填写用户名密码串（username:password）的加密文件路径。|重启生效|
| scm.tag.sdbRequiredVersion          | str     | 标签检索要求的 SDB 版本范围，默认值为 3.6.1<br>如果需要指定多个版本范围，可使用逗号（;）间隔，例如：(3.6.1, 4.0.0];(5.0.0, 6.0.0] |重启生效|
| scm.workspace.tagRetrievalUpdater.interval          | num     | 开启工作区的标签检索功能后，后台检查工作区标签库索引建立状态的时间周期 |重启生效|
| scm.tag.cacheSize          | num     | 标签库缓存大小，默认每个工作区缓存 1000 个标签 |重启生效|
| scm.sdbVersionChecker.versionCacheTTL          | num     | SDB 版本缓存过期时间，超过该时间后将重新获取 SDB 版本信息，单位为毫秒，默认值为 600000（10 分钟） |重启生效|

 > **Note:**
 >
 > * 节点配置文件路径：\<S3 服务安装目录\>/conf/s3/\<节点端口号\>/application.properties
 >
 > * scm.audit.user.xxx  xxx 表示用户的用户名，该配置项设置具体用户审计操作类型
 >
 > * scm.audit.userType.xxx  xxx 表示用户类型，该配置项设置用户类型审计操作类型，支持值详见[审计用户类型掩码列表][audit_log]
 >
 > * 审计日志多种方式配置详见[审计配置][audit_log]
 >

[public_config]:Maintainance/Node_Config/Readme.md
[audit_log]:Maintainance/Diaglog/audit_log.md
[slow_log]:Maintainance/Diaglog/slow_log.md
[zookeeper_sercurity]:Maintainance/Security/Security_Config/zookeeper.md


调度服务为后台任务的执行提供了细致的调度能力，本节主要介绍调度服务的关键原理。

![调度原理][schedule_principle]

## 节点选举 ##

调度服务节点的选举通过 Zookeeper 实现。

- 主节点承担调度服务的主体工作，包括增删改查调度任务、通知内容服务创建后台任务等

- 从节点对外仅承担调度任务的查询请求。在主节点掉线时，从节点能升主接管主节点的工作

## 调度任务的创建与执行 ##

- 驱动将调度任务信息提交给网关，网关转发请求至调度服务主节点

- 调度服务主节点将新建的任务持久至元数据服务，并根据任务信息，在节点内部启动定时器，定时触发新建的调度任务

- 每当调度服务主节点的定时器触发时，主节点将对应的任务信息提交至内容服务，由内容服务执行具体的任务内容

[schedule_principle]:Architecture/schedule_principle.png  